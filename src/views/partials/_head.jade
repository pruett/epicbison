meta(charset='utf8')
meta(http-equiv='X-UA-Compatible', content='IE=edge, chrome=1')
meta(name='description', content= www.description)
meta(name='author', content= www.author)
meta(name="viewport" content="width=device-width, initial-scale=1")

title= www.title

link(rel="stylesheet", type="text/css", href='css/critical/' + namespace + '.css', inline=true)

script#loadcss.
  function loadCSS( href, before, media, callback ){
    "use strict";
    var ss = window.document.createElement( "link" );
    var ref = before || window.document.getElementsByTagName( "script" )[ 0 ];
    var sheets = window.document.styleSheets;
    ss.rel = "stylesheet";
    ss.href = href;
    ss.media = "only x";
    ref.parentNode.insertBefore( ss, ref );
    ss.onloadcssdefined = function( cb ){
      var defined;
      for( var i = 0; i < sheets.length; i++ ){
        if( sheets[ i ].href && sheets[ i ].href === ss.href ){
          defined = true;
        }
      }
      if( defined ){
        cb();
      } else {
        setTimeout(function() {
          ss.onloadcssdefined( cb );
        });
      }
    };
    ss.onloadcssdefined(function() {
      ss.media = media || "all";
    });
    return ss;
  }

  loadCSS("css/#{namespace}.css", document.getElementById('loadcss'));
noscript
  link(href="css/#{namespace}.css" rel="stylesheet")
